{% extends "base.html" %}

{% block main %}
<section style="display: flex; flex-direction: column; align-items: center;">
    <h1 style="font-size: 4em; margin-top: 1em;">Laboratoire d'Analyse</h1>
    <section style="flex-direction: row; gap: 4em; margin: 3em 10em;" class="block">
            
        <form style="width:24%; align-self: flex-start;" method="POST" action="{{ url_for('mutation') }}">
            <h1>Générer des Mutations</h1>
            <h2>Créer un variant artificiel</h2>
            {{ form_mutation.hidden_tag() }}      
            <article class="sous_block">
                <h3 for="fichier_source" style="margin-bottom: 0;">Fichier Source :</h3>
                <select name="fichier_source" id="fichier_source" class="menu_deroulant">
                    {% for fichier in fichiers %}
                        <option value="{{ fichier.idFichier }}">{{ fichier.nomFichier }}</option>
                    {% endfor %}
                </select>
            </article>
            <article class="sous_block">
                <h2 style="margin-bottom: 0; margin-top: 2em;">Probabilités (%)</h2>
                <div class="proba">
                    <p style="flex-basis: 20%;">Remplacement</p>
                    {{ form_mutation.proba_r(class="input_moitie", style="padding-right:10px; flex_grow:0", placeholder="Rempl.") }}
                </div>
                <div class="proba">
                    <p>Suppression</p>
                    {{ form_mutation.proba_d(class="input_moitie", style="padding-right:10px; flex_grow:0", placeholder="Dél.") }}
                </div>
                <div class="proba">
                    <p>Insertion</p>
                    {{ form_mutation.proba_i(class="input_moitie", style="padding-right:10px; flex_grow:0", placeholder="Ins.") }}
                </div>
            </article>
            <div class="block_boutons" style="justify-content: center;">
                <button type="submit" class="boutons_fonctionnels">Lancer Mutation</button>
            </div>
        </form>

        <form style="width:24%; align-self: flex-start;" method="POST" action="{{ url_for('comparaison') }}">
            {{ form_comparaison.hidden_tag() }}
            <h1>Comparaisons</h1>
            <article class="sous_block" style="margin-bottom: 1.5em;">
                <p for="fichier1">Fichier 1</p>
                <select style="max-width: 75%;" name="fichier1" id="fichier1" class="menu_deroulant">
                    {% for fichier in fichiers %}
                        <option value="{{ fichier.idFichier }}">{{ fichier.nomFichier }}</option>
                    {% endfor %}
                </select>
            </article>
            <article class="sous_block">
                <p for="fichier2">Fichier 2</p>
                <select name="fichier2" id="fichier2" style="max-width: 75%;" class="menu_deroulant">
                    {% for fichier in fichiers %}
                        <option value="{{ fichier.idFichier }}">{{ fichier.nomFichier }}</option>
                    {% endfor %}
                </select>
            </article>
            <article class="sous_block">
                <h2>{{ form_comparaison.methode.label }}</h2>
                <h2>{{ form_comparaison.methode(class="form-control") }}</h2>
            </article>
            <div class="block_boutons" style="justify-content: center; margin-top: 0;">
                <button type="submit" class="boutons_fonctionnels">Comparer</button>
            </div>
            <article style=" margin-top: 2em;" class="sous_block">
            {% if resultat_comparaison is not none %}
                <div class="proba">
                    <h2>Résultat : </h2>
                    <p class="input_moitie">Distance : {{ resultat_comparaison }}</p>
                </div>
            {% endif %}
            </article>
        </form>

        <form style="width:24%; align-self: flex-start;" method="POST" action="{{ url_for('arbre_phylogenetique') }}">
            <h1>Phylogénie</h1>
            <h2 class="sous-titre">Arbre des espèces</h2>
            <div class="block_boutons" style="justify-content: center;">
                <button type="submit" class="boutons_fonctionnels">Générer l'Arbre</button>
            </div>
            {% if arbre_phylogenetique %}
            <article class="sous_block">
                <div class="arbre">
                    <h3>Résultat :</h3>
                    <pre style="font-family: monospace;">{{ arbre_phylogenetique }}</pre>
                </div>
            </article>
            {% endif %}
        </form>

    </section>
</section>
{% endblock %}
