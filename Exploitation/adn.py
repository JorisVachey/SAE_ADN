import random
import os

def generer_adn(nom_fichier : str, longueur : int):
    chemin = os.path.join(os.getcwd(), f"{nom_fichier}.adn")
    nom_final=""
    res = ""
    liste_adn=['A','T','G','C']
    
    if os.path.exists(chemin):
        rep = input("Le fichier existe déjà, voulez vous l'écraser ? (o/n): ")
        if rep.lower() == "o":
            for _ in range(longueur):
                res += random.choice(liste_adn)
            nom_final = nom_fichier
        else:
            while rep.lower() != "esc" and os.path.exists(chemin):
                rep = input("Veuillez entrer le nouveau nom de votre fichier ou 'esc' pour annuler: ")
                chemin = os.path.join(os.getcwd(), f"{rep}.adn")
                if not os.path.exists(chemin):
                    for _ in range(longueur):
                        res += random.choice(liste_adn)
                    nom_final = rep
                    break
                else:
                    print(f"Le fichier '{rep}.adn' existe déjà.")
    else:
        for _ in range(longueur):
            res += random.choice(liste_adn)
        nom_final = nom_fichier

    # Formater l'ADN sur plusieurs lignes (80 caractères par ligne)
    adn_formate = ""
    largeur_ligne = 80
    for i in range(0, len(res), largeur_ligne):
        adn_formate += res[i:i+largeur_ligne] + "\n"
    
    with open(f"{nom_final}.adn", "w", encoding="utf8") as f:
        f.write(adn_formate)
    print(f"Fichier '{nom_final}.adn' créé avec succès!")
    